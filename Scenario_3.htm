<!DOCTYPE html>
<html>

<head></head>

<body>
    <p>View console for test output</p>
    <p>[Right Click] > Insert > Console</p>
    <script>
        /*Scenario 3:
          1. Make a GET request to https://testapi.io/api/RMSTest/ibltest
          2. Verify that the “title” field in “episode”, is never null or empty(“”) for any schedule item
        */
        (function () {
            let fetchIt = fetch("https://testapi.io/api/RMSTest/ibltest");

            fetchIt
                .then(response => response.json())
                .then(d => {
                    for (let index = 0; index < d.schedule.elements.length; ++index) {
                        let element = d.schedule.elements[index].episode.title;
                        if (element === '' || element === null || element === undefined) {
                            console.log('*** FAIL ***  title ' + index + ' IS (null, empty, undefined): ' + element)
                        }
                        else {
                            console.log('--- PASS ---  title ' + index + ' IS ' + element)
                        }
                    }

                    console.log('--------------------------')
                    console.log(d)
                })
                .catch(err => 
                        console.log('There has been an error '))
        })()

    </script>
</body>

</html>
