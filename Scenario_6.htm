<!DOCTYPE html>
<html>

<head></head>

<body>
    <p>Scenario Six</p>
    
    <p>View console for test output</p>
    <p>[Right Click] > Insert > Console</p>
    <script>
        /*Scenario 6:
        1. Make a GET request to https://testapi.io/api/RMSTest/ibltest
        2. In the response headers, verify the “Date” value

        Note: Response date header is Forbidden 
        It is restricted to access response headers when using Fetch API over CORS. 
        Due to this restriction, can access only following standard headers:
            Cache-Control
            Content-Language
            Content-Type
            Expires
            Last-Modified
            Pragma
        */
        (function () {
            fetch('https://testapi.io/api/RMSTest/ibltest')
                .then((response) => {
                    console.log('Response Status: ' + response.status)
                    console.log(...response.headers);
                    //console.log('---------------------')
                    for (var pair of response.headers.entries()) {
                        console.log(pair[0] + ': ' + pair[1]);
                    }
                    return response.json()
                })
                .then((data) => {
                        console.log('---------------------')
                        console.log(data)
                })
                .catch((err) => {
                    console.log('There has been an error ')
                })
        })()


    </script>
</body>

</html>
